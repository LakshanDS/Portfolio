# BUG-2026-01-10-002: Field Name Inconsistencies (snake_case vs camelCase)

**Bug ID**: BUG-2026-01-10-002
**Severity**: Critical (Build Blocking)
**Status**: Open
**Date Reported**: 2026-01-10
**Priority**: High

---

## Summary

Multiple components use snake_case property names (e.g., `image_url`, `demo_url`) while Prisma generates camelCase property names (e.g., `imageUrl`, `demoUrl`), causing TypeScript property not found errors.

---

## Affected Files

### 1. Admin Projects Page
**File**: [src/app/jasladmin/(dashboard)/projects/page.tsx](file:///d:/Projects/Portfolio/src/app/jasladmin/(dashboard)/projects/page.tsx)
**Lines**: 33, 80, 240-241, 250-251, 260-261

**Errors**:
```typescript
// Line 33:
const projects: Project[] = await getProjects();
// Uses: project.image_url (should be project.imageUrl)
// Uses: project.demo_url (should be project.demoUrl)
// Uses: project.repo_url (should be project.repoUrl)

// Line 80:
onChange={(e) => setDemoUrl(e.target.value)}  // Correct
// But later uses demo_url in other places

// Line 240-241:
<div className="text-sm text-gray-600">
  {project.image_url ? (
// Should be: project.imageUrl
```

### 2. Project Detail View Component
**File**: [src/components/projects/ProjectDetailView.tsx](file:///d:/Projects/Portfolio/src/components/projects/ProjectDetailView.tsx)
**Lines**: 164-301 (multiple occurrences)

**Errors**:
```typescript
// Throughout the file:
project.repo_url  // Should be project.repoUrl
project.demo_url  // Should be project.demoUrl
project.image_url  // Should be project.imageUrl

// Line 164-167:
const project = await prisma.project.findUnique({
  where: { id: params.id },
  include: { roadmapItem: true }
});
// Later uses project.repo_url, etc.
```

### 3. Resume Document Component
**File**: [src/components/resume/ResumeDocument.tsx](file:///d:/Projects/Portfolio/src/components/resume/ResumeDocument.tsx)
**Lines**: 170-171

**Errors**:
```typescript
// Line 170-171:
<Link href={project.demoUrl} target="_blank" rel="noopener noreferrer">
// Should be: project.demoUrl
```

---

## Error Messages

```
Property 'image_url' does not exist on type '{ id: string; title: string; description: string; category: string; tags: string; status: string; imageUrl: string | null; demoUrl: string | null; repoUrl: string | null; ... }'.
```

```
Property 'repo_url' does not exist on type 'Project'.
```

```
Property 'demo_url' does not exist on type 'Project'.
```

---

## Root Cause

During the migration from Supabase to Prisma:
1. Supabase used snake_case column names (SQL convention)
2. The existing code was written for Supabase, using snake_case
3. Prisma schema uses camelCase field names
4. Prisma generates TypeScript types with camelCase
5. Not all components were updated to use the new naming convention

---

## Database Schema vs Generated Types

### Prisma Schema (camelCase fields):
```prisma
model Project {
  id          String   @id
  title       String
  description String
  imageUrl    String?  // Generates as: imageUrl
  demoUrl     String?  // Generates as: demoUrl
  repoUrl     String?  // Generates as: repoUrl
}
```

### Database (snake_case columns):
```sql
CREATE TABLE "Project" (
  "id" TEXT PRIMARY KEY,
  "image_url" TEXT,
  "demo_url" TEXT,
  "repo_url" TEXT
);
```

### Generated TypeScript Type (camelCase):
```typescript
{
  id: string;
  imageUrl: string | null;  // NOT image_url
  demoUrl: string | null;   // NOT demo_url
  repoUrl: string | null;   // NOT repo_url
}
```

---

## Proposed Fix

### Global Search and Replace Pattern

For each affected file, replace:

```bash
# Search pattern (case-sensitive):
image_url  -> imageUrl
demo_url   -> demoUrl
repo_url   -> repoUrl
```

### Specific File Fixes

#### File 1: src/app/jasladmin/(dashboard)/projects/page.tsx
- Line 33 interface: `image_url`, `demo_url`, `repo_url` -> camelCase
- Line 80: Update all form handlers
- Lines 240-241: Update table rendering
- Lines 250-251: Update table rendering
- Lines 260-261: Update table rendering

#### File 2: src/components/projects/ProjectDetailView.tsx
- Lines 164-301: Replace all occurrences throughout the component

#### File 3: src/components/resume/ResumeDocument.tsx
- Lines 170-171: Replace `demo_url` with `demoUrl`

---

## Additional Fields Needing Updates

The following fields also have snake_case/camelCase mismatches across admin pages:

| snake_case | camelCase |
|------------|-----------|
| created_at | createdAt |
| updated_at | updatedAt |
| start_date | startDate |
| end_date | endDate |
| display_order | displayOrder |
| icon_color | iconColor |
| pipelines_fixed | pipelinesFixed |
| projects_count | projectsCount |
| self_commits | selfCommits |
| github_url | githubUrl |
| linkedin_url | linkedinUrl |
| whatsapp_url | whatsappUrl |
| category_id | categoryId |

**Affected Files for These Fields**:
- [src/app/jasladmin/(dashboard)/education/page.tsx](file:///d:/Projects/Portfolio/src/app/jasladmin/(dashboard)/education/page.tsx)
- [src/app/jasladmin/(dashboard)/experience/page.tsx](file:///d:/Projects/Portfolio/src/app/jasladmin/(dashboard)/experience/page.tsx)
- [src/app/jasladmin/(dashboard)/about-me/page.tsx](file:///d:/Projects/Portfolio/src/app/jasladmin/(dashboard)/about-me/page.tsx)
- [src/app/jasladmin/(dashboard)/profile/page.tsx](file:///d:/Projects/Portfolio/src/app/jasladmin/(dashboard)/profile/page.tsx)
- [src/app/jasladmin/(dashboard)/skills/page.tsx](file:///d:/Projects/Portfolio/src/app/jasladmin/(dashboard)/skills/page.tsx)

---

## Impact

- **Build Status**: BLOCKED - ~40 TypeScript errors
- **Type Safety**: Lost - Properties may be undefined at runtime
- **Runtime Errors**: Likely - Accessing undefined properties will cause errors

---

## Blocks

- Build process
- TypeScript compilation
- Production deployment

---

## Verification Steps

1. Apply all field name replacements
2. Run: `npx tsc --noEmit`
3. Verify no property access errors
4. Test admin panel functionality
5. Verify project pages render correctly

---

## Related Issues

- BUG-2026-01-10-001 (Resume API Route Type Mismatch)
- BUG-2026-01-10-003 (Status/Category Type Narrowing)

---

## References

- [prisma/schema.prisma](file:///d:/Projects/Portfolio/prisma/schema.prisma) - Schema definition
- [src/lib/data.ts](file:///d:/Projects/Portfolio/src/lib/data.ts) - Data layer functions

---

**Assigned To**: Unassigned
**Estimated Fix Time**: 30-45 minutes
**Actual Fix Time**: TBD
