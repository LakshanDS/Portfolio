# Bug Report: Image Optimization Warnings

**Bug ID**: BUG-20260109-2
**Date Reported**: January 9, 2026
**Severity**: Low (Performance)
**Status**: Open
**Category**: Performance Optimization

---

## Description

Multiple instances of using standard HTML `<img>` tags instead of Next.js optimized `<Image />` component. This results in slower LCP (Largest Contentful Paint) scores and higher bandwidth usage.

## Affected Files

1. **[src/app/about/page.tsx](d:/Projects/Portfolio/src/app/about/page.tsx#L28)** (Line 28-32)
2. **[src/app/page.tsx](d:/Projects/Portfolio/src/app/page.tsx#L42)** (Line 42-46)
3. **[src/components/projects/ProjectDetailView.tsx](d:/Projects/Portfolio/src/components/projects/ProjectDetailView.tsx#L142)** (Line 142)
4. **[src/components/projects/ProjectDetailView.tsx](d:/Projects/Portfolio/src/components/projects/ProjectDetailView.tsx#L215)** (Line 215)

## Error Messages

```
D:\Projects\Portfolio\src\app\about\page.tsx
  28:17  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element

D:\Projects\Portfolio\src\app\page.tsx
  42:15  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element

D:\Projects\Portfolio\src\components\projects\ProjectDetailView.tsx
  142:9   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element

D:\Projects\Portfolio\src\components\projects\ProjectDetailView.tsx
  215:15  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
```

## Code Context

### Instance 1: About Page Profile Image

```typescript
// File: src/app/about/page.tsx, Line 28-32
<img
  alt="Lakshan De Silva"
  className="w-full h-full object-cover transform transition duration-700 group-hover:scale-110"
  src="/myself.jpeg"
/>
```

### Instance 2: Homepage Profile Image

```typescript
// File: src/app/page.tsx, Line 42-46
<img
  src="/myself.jpeg"
  alt="Lakshan De Silva"
  className="w-full h-full object-cover transform transition duration-700 group-hover:scale-110"
/>
```

### Instance 3: ProjectDetailView Markdown Image Renderer

```typescript
// File: src/components/projects/ProjectDetailView.tsx, Line 142
img: ({ src, alt }: any) => (
  <div className="my-8 rounded-xl overflow-hidden border border-white/10 shadow-2xl">
    <img src={src} alt={alt} className="w-full h-auto" />
    {alt && <div className="bg-[#0d1117] p-2 text-center text-xs text-gray-500 font-mono">{alt}</div>}
  </div>
),
```

### Instance 4: ProjectDetailView (Duplicate?)
```typescript
// File: src/components/projects/ProjectDetailView.tsx, Line 215
// Note: This may be a duplicate or separate occurrence - needs investigation
```

## Expected Behavior

All images should use Next.js `<Image />` component for automatic optimization, lazy loading, and responsive serving.

## Proposed Fixes

### Fix 1: About Page Profile Image

```typescript
import Image from 'next/image';

// Replace img tag with:
<Image
  alt="Lakshan De Silva"
  className="w-full h-full object-cover transform transition duration-700 group-hover:scale-110"
  src="/myself.jpeg"
  width={256}  // Adjust based on actual image dimensions
  height={256}
  priority     // For above-the-fold images
/>
```

### Fix 2: Homepage Profile Image

```typescript
import Image from 'next/image';

// Replace img tag with:
<Image
  src="/myself.jpeg"
  alt="Lakshan De Silva"
  className="w-full h-full object-cover transform transition duration-700 group-hover:scale-110"
  width={160}  // Adjust based on actual image dimensions
  height={160}
  priority     // For above-the-fold images
/>
```

### Fix 3: ProjectDetailView Markdown Image Renderer

```typescript
import Image from 'next/image';

// Replace img tag with:
img: ({ src, alt }: any) => (
  <div className="my-8 rounded-xl overflow-hidden border border-white/10 shadow-2xl">
    <Image
      src={src}
      alt={alt || ''}
      width={800}   // Adjust based on typical image dimensions
      height={400}
      className="w-full h-auto"
    />
    {alt && <div className="bg-[#0d1117] p-2 text-center text-xs text-gray-500 font-mono">{alt}</div>}
  </div>
),
```

## Impact

- **Build Status**: Does NOT block build (build passes successfully)
- **Runtime**: No functional impact, but slower image loading
- **Performance**: Slower LCP scores, higher bandwidth usage
- **User Experience**: Potential delay in image rendering, especially on slow connections
- **SEO**: Better LCP scores improve SEO rankings
- **Cost**: Higher bandwidth costs if using CDN with per-GB pricing

## Benefits of Fixing

1. **Automatic Image Optimization**: Next.js automatically resizes, optimizes, and serves images in modern formats (WebP, AVIF)
2. **Lazy Loading**: Automatic lazy loading for below-the-fold images
3. **Responsive Images**: Serves appropriately sized images based on device viewport
4. **Better LCP**: Improves Largest Contentful Paint metric
5. **Reduced Bandwidth**: Optimized image sizes reduce data transfer
6. **Better UX**: Faster image loading improves perceived performance

## Reproduction Steps

1. Run ESLint on project:
   ```bash
   npm run lint
   ```
2. Observe 4 warnings about using `<img>` instead of `<Image />`
3. Run Lighthouse performance audit to see impact on LCP scores

## Root Cause

Standard HTML `<img>` tags do not leverage Next.js's built-in image optimization system. The Next.js `<Image />` component provides automatic optimization, lazy loading, and responsive serving out of the box.

## Testing

After applying fixes, verify:

```bash
# 1. Run ESLint - should show 0 image warnings
npm run lint

# 2. Verify build succeeds
npm run build

# 3. Test pages in browser
npm run dev

# 4. Run Lighthouse audit
# - Open Chrome DevTools
# - Go to Lighthouse tab
# - Run performance audit
# - Verify LCP score improved
```

## Next.js Configuration

Ensure `next.config.ts` allows external image domains if needed:

```typescript
// next.config.ts
const nextConfig = {
  images: {
    remotePatterns: [
      {
        protocol: 'https',
        hostname: '**', // Adjust based on your needs
      },
    ],
  },
};
```

## Related Issues

- This is part of 4 image optimization warnings in the project
- Related TODO items: [progress/todo.md](../todo.md) - Items #3, #4, #5, #6

## Additional Considerations

### Image Dimensions

Next.js `<Image />` component requires explicit `width` and `height` props. For profile images, use actual dimensions:

```bash
# Check image dimensions
file public/myself.jpeg
# Or use online tool: https://squoosh.app/
```

### Image Optimization

Consider optimizing source images before adding to project:
- Use JPEG with 80-85% quality
- Resize to appropriate dimensions
- Use WebP format for better compression

### Remote Images

For remote images (from CDNs, external sources), ensure proper configuration in `next.config.ts`.

## Resolution Checklist

- [ ] Replace img tag in about/page.tsx
- [ ] Replace img tag in page.tsx (homepage)
- [ ] Replace img tag in ProjectDetailView.tsx (both instances)
- [ ] Verify image dimensions are correct
- [ ] Test all images load correctly
- [ ] Verify ESLint passes (0 image warnings)
- [ ] Verify build succeeds
- [ ] Run Lighthouse audit and compare scores
- [ ] Update bug status to Resolved
- [ ] Update progress/progress.md with resolution

## Future Enhancements

1. **Add Test Suite**: Implement E2E tests to verify image loading and optimization
2. **Image CDN**: Consider using ImageKit, Cloudinary, or similar for advanced optimization
3. **Image Galleries**: For projects with multiple images, implement gallery with lazy loading
4. **Responsive Images**: Implement srcset for multiple breakpoints
5. **Progressive Loading**: Add blur placeholder for better perceived performance

---

**Reported By**: Auditor (Quality Assurance Agent)
**Assigned To**: Unassigned
**Priority**: Low
**Estimated Fix Time**: 20-25 minutes (all 4 instances)
**Impact**: Performance improvement (better LCP scores, reduced bandwidth)
