generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
}

model Project {
  id          String   @id @default(cuid())
  title       String
  description String
  category    String
  tags        String
  status      String
  imageUrl    String?
  demoUrl     String?
  repoUrl     String?
  content     String?
  displayOrder Int      @default(999)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model RoadmapItem {
  id          String   @id @default(cuid())
  title       String
  description String
  date        String
  category    String
  status      String
  tags        String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model ProfileStatus {
  id             String   @id @default(cuid())
  isOpenToWork   Boolean  @default(false)
  statusMessage  String
  githubUsername String
  updatedAt      DateTime @updatedAt
}

model Profile {
  id          String   @id @default(cuid())
  name        String
  nickname    String?
  title       String
  bio         String
  email       String
  email2      String?
  phone       String
  phone2      String?
  dateOfBirth String?
  nic         String?
  gender      String?
  address     String?
  profileImage String?
  githubUrl   String
  linkedinUrl String
  whatsappUrl String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model SkillCategory {
  id               String           @id @default(cuid())
  name             String
  icon             String
  displayOrder     Int              @default(0)
  createdAt        DateTime         @default(now())
  updatedAt        DateTime         @updatedAt
  coreCompetencies CoreCompetency[]
  skills           Skill[]
}

model Skill {
  id           String        @id @default(cuid())
  categoryId   String
  name         String
  icon         String?
  iconColor    String?
  displayOrder Int           @default(0)
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  category     SkillCategory @relation(fields: [categoryId], references: [id], onDelete: Cascade)
}

model Education {
  id           String   @id @default(cuid())
  institution  String
  title        String
  description  String
  startDate    String
  endDate      String
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Experience {
  id          String   @id @default(cuid())
  company     String
  position    String
  description String
  startDate   String
  endDate     String?
  isCurrent   Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model ProfileStats {
  id             String   @id @default(cuid())
  pipelinesFixed String
  projectsCount  Int
  selfCommits    Int
  experience     String
  resumeDownloads Int     @default(0)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model PageVisit {
  id        String   @id @default(cuid())
  path      String
  date      String // Format: "YYYY-MM-DD"
  count     Int      @default(1)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([path, date])
}

model AboutCard {
  id           String   @id @default(cuid())
  title        String
  icon         String
  iconColor    String
  content      String
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model CoreCompetency {
  id           String         @id @default(cuid())
  title        String
  description  String
  expertise    String
  tags         String         @default("")
  icon         String?
  categoryId   String?
  displayOrder Int            @default(0)
  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @updatedAt
  category     SkillCategory? @relation(fields: [categoryId], references: [id])
}

model Comment {
  id        String   @id @default(cuid())
  name      String?
  email     String?
  content   String
  isRead    Boolean  @default(false)
  createdAt DateTime @default(now())
}

model CmsSettings {
  /// Singleton row holding settings previously stored in:
  /// - homepage-settings.json
  /// - about-settings.json
  /// - roadmap-settings.json
  /// - projects-settings.json
  ///
  /// Use `id = "default"` to treat this as a singleton.
  id              String   @id @default("default")

  /// Store each settings document as JSON for flexibility and to mirror existing structure.
  /// (SQLite supports JSON as TEXT; Prisma maps Json to a compatible representation.)
  homepage        Json
  about           Json
  roadmap         Json
  projects        Json

  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model User {
  id           String   @id @default(cuid())
  secret       String   // TOTP secret for Google Authenticator
  isRegistered Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}
